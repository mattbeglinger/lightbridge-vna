# ==============================================================================
# LIGHTBRIDGE SECONDARY (AZURE WESTUS2)
# ==============================================================================

global:
  storageClass: "default" # Standard Azure Storage Class

# ------------------------------------------------------------------------------
# 1. MINIO (Replication Target)
# ------------------------------------------------------------------------------
minio:
  mode: distributed
  replicas: 4
  persistence:
    size: 10Gi
  rootUser: "admin"
  rootPassword: "SuperSecretPassword123!"
  buckets:
    - name: orthanc-data
      policy: public
      versioning: true

# ------------------------------------------------------------------------------
# 2. POSTGRES (Replica)
# Managed by CNPG Operator.
# ------------------------------------------------------------------------------
postgresql:
  enabled: false

# ------------------------------------------------------------------------------
# 3. KEYCLOAK (Replica)
# ------------------------------------------------------------------------------
keycloak:
  auth:
    adminUser: "admin"
    adminPassword: "SuperSecretPassword123!"
  
  externalDatabase:
    host: "lightbridge-db-ro" # Note: RO (Read Only) service for secondary
    user: "app"
    password: "app-password"
    database: "keycloak"

  # CRITICAL FIX: PROXY CONFIGURATION
  extraEnvVars:
    - name: KC_PROXY
      value: "edge"
    - name: KC_HOSTNAME_STRICT
      value: "false"
    - name: KC_HTTP_ENABLED
      value: "true"

# ------------------------------------------------------------------------------
# 4. LIGHTBRIDGE APP CONFIG
# ------------------------------------------------------------------------------
orthanc:
  name: "lightbridge-orthanc"
  
# Defines the Primary Site URL for replication
globalConfig:
  primaryUrl: "http://REPLACE_WITH_AWS_URL"
